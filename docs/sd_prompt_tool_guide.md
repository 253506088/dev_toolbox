# Dev Toolbox - Stable Diffusion 提示词工具使用指南

## 简介
SD 提示词工具是一个专为 Stable Diffusion 用户设计的辅助工具，旨在帮助用户快速解析、翻译、管理和优化提示词 (Prompt)。它内置了包含近 10 万条中英文对照的本地词库，无需联网即可实现精准翻译。

## 功能特性
- **本地翻译**：内置海量词库，自动将英文 Tag 翻译为中文。
- **自动解析**：智能识别逗号分隔的提示词，去除首尾空格。
- **去重处理**：自动移除重复的 Tag，保持提示词整洁。
- **灵活编辑**：
    - 点击 Tag 可查看翻译、编辑内容。
    - 支持在任意位置插入新 Tag (向前/向后)。
    - 支持删除任意 Tag。
- **一键复制**：将整理好的 Tag 重新组合为标准格式并复制到剪贴板。

## 环境准备 (开发者)
如果您是开发者或需要更新词库，请按照以下步骤操作：

1.  **更新词库**：
    运行项目内置的构建脚本，它会从开源社区自动下载并合并最新的词库数据。
    ```bash
    dart run tool/build_dictionary.dart
    ```
    脚本运行完成后，会生成/更新 `assets/data/sd_tags.json` 文件。

2.  **重新编译**：
    如果更新了资源文件，建议重新运行 App 以加载最新数据。

## 使用指南

### 1. 录入与解析
- 在顶部的输入框中粘贴或输入您的提示词 (例如从 Civitai 复制的 Prompt)。
- 点击 **"Parse"** 按钮。
- 系统会将长文本拆解为一个个独立的 Tag，并自动翻译。

### 2. 查看与管理
- **查看翻译**：每个 Tag 都会显示为 `英文 (中文)` 的形式，方便对照。
- **删除 Tag**：点击 Tag 上的 `×` 号或长按选择删除。
- **编辑 Tag**：点击 Tag，选择 **"Edit"** 修改内容。
- **插入 Tag**：点击任意 Tag，选择 **"Insert Before"** (在前插入) 或 **"Insert After"** (在后插入)。

### 3. 导出
- 编辑完成后，点击底部的 **"Copy Result"** 按钮。
- 整理好的提示词将以英文逗号分隔的格式复制到您的剪贴板，可直接粘贴到 WebUI 中使用。

## 常见问题
**Q: 为什么有些词没有翻译？**
A: 词库虽然庞大，但无法覆盖所有生僻或最新的 Tag。未收录的 Tag 将仅显示英文原文。您可以手动在 `assets/data/sd_tags.json` 中添加自定义翻译 (需重新编译)。

**Q: 词库数据来源哪里？**
A: 数据主要合并自 `Physton/sd-webui-prompt-all-in-one-assets` 和 `DominikDoom/a1111-sd-webui-tagcomplete` 等优秀的开源项目。
